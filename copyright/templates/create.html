{% extends "base.html" %}

{% block css %}
<link rel="stylesheet" type="text/css" href="/static/css/forms.css">
{% endblock %}

{% block content %}
<div class="container starter-template">
  <p class="lead">Create a License</p>
  <p>The license is subject to the following mandatory terms of use:</p>
  <ol class="terms-list">
    <li>The image may be reproduced online only. No physical copy can be made.</li>
    <li>There are no geographical limitations to the use of the license.</li>
    <li>The license is non-exclusive, non-transferable, and non-sub-licensable.</li>
    <li>The photographer must be attributed.</li>
    <li>No use can in any way depict the model (if any) in a sensitive, unflattering, or controversial way.</li>
    <li>No creation of derivative work</li>
    <li>The license can be terminated by a one month written notice after the expiry of the first six months.</li>
  </ol>

  {% if not token %}
  <a href="https://connect.stripe.com/oauth/authorize?response_type=code&amp;client_id=ca_6MnivEyxNIcx1cNuyoGHc7u1dRcNevgW&amp;scope=read_write"><img src="/static/images/stripe.png"></a>

  {% else %}
  <p>You've authenticated via Stripe Connect as {{stripe_username}}. You can create a license below:</p>
  <form id="licenseInfo" class="well" enctype="multipart/form-data" action="/register" method="POST">

    <!-- Upload Image -->
    <div class="form-group">
      <label for="imageInput">Image File</label>
      <input id="imageInput" type="file">
    </div>
    <div id="preview">
      <img class="img-responsive" src="../static/images/default.png">
    </div>
    <input type="hidden" id="image_url" name="image_url" value="../static/images/default.png" />

    <!-- Stripe -->
    <input type="hidden" value="{{stripe_username}}" name="id"/>
    
    <!-- Price -->
    <div class="form-group">
      <label for="licensePrice">Price</label>
      <div class="input-group">
        <input id="licensePrice" class="form-control" type="text" placeholder="Amount" name="amount">
        <div class="input-group-addon">cents</div>
      </div>
    </div>

    <!-- Description -->
    <div class="form-group">
      <label for="description">Description</label>
      <textarea name="description" class="form-control" rows="3"></textarea>
    </div>

    <!-- Submit -->
    <button type="submit" class="btn btn-default">Create</button>
  </form>
  {% endif %}

</div>
{% endblock %}

{% block scripts %}
{% if token %}
  <script type="text/javascript" src="../static/js/upload.js"></script>
{% endif %}
{% endblock %}