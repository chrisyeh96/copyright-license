{% extends "base.html" %}

{% block css %}
<link rel="stylesheet" type="text/css" href="../static/css/forms.css">
{% endblock %}

{% block content %}
<div class="container starter-template">
  <p class="lead">Create a License</p>
  <p>The license is subject to the following mandatory terms of use:</p>
  <ol class="terms-list">
    <li>The image may be reproduced online only. No physical copy can be made.</li>
    <li>There are no geographical limitations to the use of the license.</li>
    <li>The license is non-exclusive, non-transferable, and non-sub-licensable.</li>
    <li>The photographer must be attributed.</li>
    <li>No use can in any way depict the model (if any) in a sensitive, unflattering, or controversial way.</li>
    <li>No creation of derivative work</li>
    <li>The license can be terminated by a one month written notice after the expiry of the first six months.</li>
  </ol>

  {% if not token %}
  <a href="https://connect.stripe.com/oauth/authorize?response_type=code&amp;client_id=ca_6MnivEyxNIcx1cNuyoGHc7u1dRcNevgW&amp;scope=read_write">
    <img src="/static/images/stripe.png">
  </a>

  {% else %}
  <p>You've authenticated via Stripe Connect as {{stripe_id}}. You can create a license below:</p>

  <form id="licenseInfo" class="well dropzone" enctype="multipart/form-data" action="/register" method="POST">

    <!-- Upload Image -->
    <div class="form-group">
      <label>Image File</label><br>

      <!-- Drop Zone with Preview -->
      <div id="dropzoneWrapper">
        <div id="dropzone">
          <img id="previewImg" class="hidden" src="" alt="">
          <div id="dropzoneDetails" class="hidden">
            <span id="dropzoneName"></span>
            <span id="dropzoneSize"></span>
          </div>
        </div>
        <input id="fileInput" name="imageFile" type="file" accept="image/jpeg, image/png, image/gif" required>
      </div>
    </div>

    <!-- Stripe -->
    <input type="hidden" value="{{stripe_id}}" name="stripe_id"/>

    <!-- Commercial -->
    <div class="form-group">
      <label>Commercial Use</label>
      <div class="radio">
        <label>
          <input type="radio" name="allow_commercial" value="False" checked>
          Do not allow commercial use of the work
        </label>
      </div>
      <div class="radio">
        <label>
          <input type="radio" name="allow_commercial" value="True">
          Allow commercial use of the work
        </label>
      </div>
    </div>

    <!-- Derivative -->
    <div class="form-group">
      <label>Derivative Works</label>
      <div class="radio">
        <label>
          <input type="radio" name="allow_derivative" value="False" checked>
          Do not allow derivative works
        </label>
      </div>
      <div class="radio">
        <label>
          <input type="radio" name="allow_derivative" value="True">
          Allow modifications and derivative works
        </label>
      </div>
    </div>
    
    <!-- Price -->
    <div class="form-group">
      <label for="price_base">Base Price</label>
      <div class="input-group">
        <input id="price_base" class="form-control" type="text" placeholder="Amount" name="price_base" value="0">
        <div class="input-group-addon">cents</div>
      </div>
    </div>
    <div class="form-group">
      <label for="price_commercial">Additional Charge for Commercial Use</label>
      <div class="input-group">
        <input id="price_commercial" class="form-control" type="text" placeholder="Amount" name="price_commercial" value="0">
        <div class="input-group-addon">cents</div>
      </div>
    </div>
    <div class="form-group">
      <label for="price_derivative">Additional Charge for Derivative Works</label>
      <div class="input-group">
        <input id="price_derivative" class="form-control" type="text" placeholder="Amount" name="price_derivative" value="0">
        <div class="input-group-addon">cents</div>
      </div>
    </div>

    <!-- Description -->
    <div class="form-group">
      <label for="description">Description</label>
      <textarea name="description" class="form-control" rows="3"></textarea>
    </div>

    <!-- Submit -->
    <button type="submit" class="btn btn-default">Create</button>
  </form>
  {% endif %}

</div>
{% endblock %}

{% block scripts %}
{% if token %}
  <script type="text/javascript" src="../static/js/upload.js"></script>
{% endif %}
{% endblock %}